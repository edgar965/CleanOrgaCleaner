<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:components="clr-namespace:CleanOrgaCleaner.Views.Components"
             x:Class="CleanOrgaCleaner.Views.SettingsPage"
             Title="Einstellungen"
             BackgroundColor="#f5f5f5"
             Shell.NavBarIsVisible="False"
             Shell.TabBarIsVisible="False">

    <Grid RowDefinitions="Auto,*">

        <!-- AppHeader Component -->
        <components:AppHeader x:Name="Header" Grid.Row="0"/>

        <!-- Content -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="20" Padding="20">

                <Label x:Name="SettingsTitleLabel"
                       Text="Einstellungen"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="#333"
                       HorizontalOptions="Center"/>

                <!-- User Info -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 15"
                        Stroke="Transparent"
                        Padding="20">
                    <Border.Shadow>
                        <Shadow Brush="Gray" Offset="2,2" Radius="5" Opacity="0.3"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="10">
                        <Label x:Name="LoggedInAsLabel"
                               Text="Angemeldet als"
                               FontSize="14"
                               TextColor="#888"/>
                        <Label x:Name="UserNameLabel"
                               Text=""
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="#333"/>
                    </VerticalStackLayout>
                </Border>

                <!-- Avatar Selection -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 15"
                        Stroke="Transparent"
                        Padding="20">
                    <Border.Shadow>
                        <Shadow Brush="Gray" Offset="2,2" Radius="5" Opacity="0.3"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="15">
                        <Label x:Name="AvatarTitleLabel"
                               Text="Avatar"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="#333"/>

                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <!-- Current Avatar Display -->
                            <Border WidthRequest="60"
                                    HeightRequest="60"
                                    StrokeShape="RoundRectangle 30"
                                    Stroke="#e0e0e0"
                                    BackgroundColor="#f5f5f5">
                                <Label x:Name="CurrentAvatarLabel"
                                       Text=""
                                       FontSize="32"
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center"/>
                            </Border>

                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                                <Label x:Name="AvatarHintLabel"
                                       Text="Tippen zum Aendern"
                                       FontSize="14"
                                       TextColor="#666"/>
                            </VerticalStackLayout>

                            <Button Grid.Column="2"
                                    x:Name="ChangeAvatarButton"
                                    Text="Aendern"
                                    BackgroundColor="#2196F3"
                                    TextColor="White"
                                    FontSize="14"
                                    CornerRadius="10"
                                    Padding="15,10"
                                    Clicked="OnChangeAvatarClicked"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Language Selection -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 15"
                        Stroke="Transparent"
                        Padding="20">
                    <Border.Shadow>
                        <Shadow Brush="Gray" Offset="2,2" Radius="5" Opacity="0.3"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="15">
                        <Label x:Name="LanguageTitleLabel"
                               Text="Sprache"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="#333"/>

                        <Picker x:Name="LanguagePicker"
                                Title="Sprache waehlen"
                                FontSize="16"
                                TextColor="#333"
                                SelectedIndexChanged="OnLanguageChanged">
                            <Picker.Items>
                                <x:String>DE Deutsch</x:String>
                                <x:String>GB English</x:String>
                                <x:String>ES Espanol</x:String>
                                <x:String>RO Romana</x:String>
                                <x:String>PL Polski</x:String>
                                <x:String>RU Russkij</x:String>
                                <x:String>UA Ukrainska</x:String>
                                <x:String>VN Tieng Viet</x:String>
                            </Picker.Items>
                        </Picker>

                        <Label x:Name="LanguageHintLabel"
                               Text="Die Sprache wird fuer Chat-Uebersetzungen verwendet"
                               FontSize="12"
                               TextColor="#888"/>
                    </VerticalStackLayout>
                </Border>

                <!-- Biometric Login -->
                <Border x:Name="BiometricSection"
                        BackgroundColor="White"
                        StrokeShape="RoundRectangle 15"
                        Stroke="Transparent"
                        Padding="20"
                        IsVisible="False">
                    <Border.Shadow>
                        <Shadow Brush="Gray" Offset="2,2" Radius="5" Opacity="0.3"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="15">
                        <Label x:Name="BiometricTitleLabel"
                               Text="Sicherheit"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="#333"/>

                        <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto">
                            <Label x:Name="BiometricLabel"
                                   Text="Face ID / Touch ID"
                                   TextColor="#333"
                                   FontSize="15"
                                   VerticalOptions="Center"/>
                            <Switch x:Name="BiometricSwitch"
                                    Grid.Column="1"
                                    OnColor="#2196F3"
                                    Toggled="OnBiometricToggled"/>
                            <Label Grid.Row="1"
                                   Grid.ColumnSpan="2"
                                   x:Name="BiometricHintLabel"
                                   Text="Schnelle und sichere Anmeldung mit Biometrie"
                                   FontSize="12"
                                   TextColor="#888"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- App Info -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 15"
                        Stroke="Transparent"
                        Padding="20">
                    <Border.Shadow>
                        <Shadow Brush="Gray" Offset="2,2" Radius="5" Opacity="0.3"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="10">
                        <Label x:Name="AppInfoLabel"
                               Text="App Info"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="#333"/>

                        <Grid ColumnDefinitions="*,Auto">
                            <Label x:Name="VersionLabel"
                                   Text="Version"
                                   TextColor="#666"/>
                            <Label x:Name="VersionValueLabel"
                                   Grid.Column="1"
                                   Text="1.08"
                                   TextColor="#333"/>
                        </Grid>

                        <Grid ColumnDefinitions="*,Auto">
                            <Label x:Name="ServerLabel"
                                   Text="Server"
                                   TextColor="#666"/>
                            <Label Grid.Column="1"
                                   Text="cleanorga.com"
                                   TextColor="#333"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Exit App Button -->
                <Button x:Name="ExitButton"
                        Text="App beenden"
                        BackgroundColor="#e0e0e0"
                        TextColor="#333"
                        FontSize="16"
                        CornerRadius="15"
                        Padding="20,15"
                        Clicked="OnExitClicked"/>

            </VerticalStackLayout>
        </ScrollView>

    </Grid>
</ContentPage>
